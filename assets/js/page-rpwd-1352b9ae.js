import{_ as M,r as v,K as q,P as W,G as F,aN as Q,A as X,N as Y,ad as j,a2 as R,o as k,j as h,a6 as d,H as l,aa as I,ak as A,l as r,a0 as c,a7 as G,a8 as J,aB as Z,n as p,O as D,af as ee,ag as se,a9 as T,a1 as E}from"./modules-f0d7701b.js";import{c as ne,P as x,V as ie,E as le,b as ue,d as de}from"./page-login-e59ddec4.js";import{u as N,G as B,A as V,be as me,bf as ae,bg as te,bs as oe,_ as K,bE as pe,bl as ce,K as ve}from"./page-activity-ee8a72bf.js";import{v as $,a as H}from"./page-home-c4c81372.js";import"./native/index-ac3cc376.js";import"./en-bc484038.js";import"./rus-17e010d8.js";import"./vi-2b471810.js";import"./id-d4342d32.js";import"./hd-509ab7a8.js";import"./tha-9d9a5d5b.js";import"./md-c91aff1a.js";import"./bra-3ab0f86f.js";import"./my-d3165d06.js";import"./bdt-cf865807.js";import"./zh-3d649d7a.js";import"./pak-c9649f1f.js";import"./ar-9b618746.js";window.getBuildInfo=function(){return{buildTime:"11/30/2024, 12:54:19 AM",branch:" commitId:eb04e17425ebd38c4c3adb463c3193984d6a78ef"}};const we=w=>(ee("data-v-e7fb7c52"),w=w(),se(),w),_e={class:"register__container"},ge={class:"register__container-tip"},be=we(()=>r("div",{class:"tipbg"},null,-1)),fe={class:"register__container-tips"},ke={class:"register__container-remember"},he={class:"register__container-button"},ye=M({__name:"ResetPassword",setup(w,{expose:y}){const C=v("reset"),{t:n}=q(),s=N(),i=W(),_=v(!1),S=B(),b=v(!1),m=v(!1),e=v({numberType:s.userForm.numberType,number:"",password:"",rePassword:"",smsvcode:""});sessionStorage.getItem("rpwd")&&(e.value=JSON.parse(sessionStorage.getItem("rpwd")||""),sessionStorage.setItem("rpwd","")),F(()=>s.rPwdForm.numberType,t=>{!e.value.numberType&&(e.value.numberType=t)},{flush:"post"});const a=async()=>{const t=(e.value.number.trim()+e.value.numberType).length;if(t<10||t>14)return s.setCountDown(0),p({message:n("wrongTel"),wordBreak:"break-word"});await V(me({phone:e.value.numberType+e.value.number,codeType:ae.resetPassword}))?D(n("sendSuccess")):setTimeout(()=>{s.setCountDown(0)},500)};async function g(){const t=(e.value.number.trim()+e.value.numberType).length;if(t<10||t>14)return p({message:n("wrongTel"),wordBreak:"break-word"});if(!e.value.number.trim()||_.value){_.value=!0;return}if(s.isOpenForgetPasswordSMSState)if(e.value.smsvcode.trim()){if(e.value.smsvcode.trim().length!=6)return p({message:n("verifyCode6Digits"),wordBreak:"break-word"})}else return p({message:n("registerTip1"),wordBreak:"break-word"});if(!e.value.password.trim())return p({message:n("registerTip2"),wordBreak:"break-word"});if(!$.passReg3.test(e.value.password)){m.value=!0;return}if(!e.value.rePassword.trim())return p({message:n("registerTip3"),wordBreak:"break-word"});if(e.value.password!==e.value.rePassword){b.value=!0;return}else b.value=!1;if(!s.userForm.termAndPolicy)return p({message:n("registerDesc1"),wordBreak:"break-word"});const{numberType:o,number:f,password:u,smsvcode:z}=e.value;let re={username:o+f.trim(),password:u,smsvcode:z,type:"mobile"};await V(te(re))&&(localStorage.getItem("token")&&(await oe({}),S.token="",s.userForm.vCode="",s.loginout(),localStorage.setItem("isToLogin","1"),B().setToken("")),i.push("/login"),D(n("rpdsucceed")))}Q(window,"keydown",t=>{t.key=="Enter"&&g()});const P=()=>{i.push({name:"About-AboutDetail"})},O=t=>{e.value.numberType=t},L=t=>{e.value.number=t};X(()=>{s.setCountDown(0)});let U=F(()=>e.value.number,t=>{s.setCountDown(0)},{flush:"post"});return Y(()=>{U()}),j((t,o)=>{t.name=="About-AboutDetail"?sessionStorage.setItem("rpwd",JSON.stringify(e.value)):sessionStorage.setItem("rpwd","")}),y({showPhoneValidate:_}),(t,o)=>{const f=R("van-checkbox");return k(),h("div",_e,[d(ne,{"show-validate":_.value,"onUpdate:showValidate":o[0]||(o[0]=u=>_.value=u),"number-type":e.value.numberType,number:e.value.number,type:C.value,onChangeT:O,onChangeN:L},null,8,["show-validate","number-type","number","type"]),d(x,{value:e.value.password,"onUpdate:value":o[1]||(o[1]=u=>e.value.password=u),label:l(n)("newPSWRest")},null,8,["value","label"]),I(r("div",ge,[be,r("span",null,c(l(n)("pswRule")),1)],512),[[A,m.value]]),d(x,{value:e.value.rePassword,"onUpdate:value":o[2]||(o[2]=u=>e.value.rePassword=u),label:l(n)("newPSWconfirm")},null,8,["value","label"]),I(r("div",fe,[r("span",null,c(l(n)("unmatchedInput")),1)],512),[[A,b.value]]),d(ie,{value:e.value.smsvcode,"onUpdate:value":o[3]||(o[3]=u=>e.value.smsvcode=u),number:e.value.number,sendFunc:a,numberType:e.value.numberType,loginType:"1"},null,8,["value","number","numberType"]),r("div",ke,[d(f,{modelValue:l(s).userForm.termAndPolicy,"onUpdate:modelValue":o[5]||(o[5]=u=>l(s).userForm.termAndPolicy=u)},{default:G(()=>[J(c(l(n)("readNagree"))+" ",1),r("span",{onClick:o[4]||(o[4]=Z(u=>P(),["stop"]))},c(l(n)("desPrivacy")),1)]),_:1},8,["modelValue"])]),r("div",he,[r("button",{onClick:g},c(l(n)("reset")),1)])])}}});const Se=K(ye,[["__scopeId","data-v-e7fb7c52"],["__file","/var/lib/jenkins/workspace/web-印度-sikkim-ar058-webnew/src/components/Login/ResetPassword.vue"]]),Pe=w=>(ee("data-v-470fd154"),w=w(),se(),w),Te={class:"register__container"},Ce={class:"register__container-tip"},Ie=Pe(()=>r("div",{class:"tipbg"},null,-1)),Ae={class:"register__container-tips"},Be={class:"register__container-remember"},Ee={class:"register__container-button"},$e=M({__name:"ResetEmailPassword",setup(w,{expose:y}){const{registerState:C}=pe();C();const n=v("reset"),{t:s}=q(),i=N(),_=B(),S=W(),b=v(!1),m=v(!1),e=v(!1),a=v({numberType:i.userForm.numberType,number:"",email:"",password:"",rePassword:"",smsvcode:""});sessionStorage.getItem("rpwd")&&(a.value=JSON.parse(sessionStorage.getItem("rpwd")||""),sessionStorage.setItem("rpwd","")),F(()=>i.rPwdForm.numberType,t=>{!a.value.numberType&&(a.value.numberType=t)},{flush:"post"});const g=async()=>{if(!$.email1.test(a.value.email))return i.setCountEmailDown(0),p({message:s(H.email),wordBreak:"break-word"});await V(ce({email:a.value.email,emailType:ae.resetPassword}))?D(s("sendSuccess")):setTimeout(()=>{i.setCountEmailDown(0)},500)};async function P(){if(!$.email1.test(a.value.email))return p({message:s(H.email),wordBreak:"break-word"});if(i.isOpenForgetPasswordEmailState)if(a.value.smsvcode.trim()){if(a.value.smsvcode.trim().length!=6)return p({message:s("verifyCode6Digits"),wordBreak:"break-word"})}else return p({message:s("registerTip6"),wordBreak:"break-word"});if(!a.value.password.trim())return p({message:s("registerTip2"),wordBreak:"break-word"});if(!$.passReg3.test(a.value.password)){e.value=!0;return}if(!a.value.rePassword.trim())return p({message:s("registerTip3"),wordBreak:"break-word"});if(a.value.password!==a.value.rePassword){m.value=!0;return}else m.value=!1;if(!i.userForm.termAndPolicy)return p({message:s("registerDesc1"),wordBreak:"break-word"});const{email:t,password:o,smsvcode:f}=a.value;let u={username:t.trim(),password:o,type:"email",smsvcode:f};await V(te(u))&&(localStorage.getItem("token")&&(await oe({}),_.token="",i.userForm.vCode="",i.loginout(),localStorage.setItem("isToLogin","1"),B().setToken("")),S.push("/login"),D(s("rpdsucceed")))}Q(window,"keydown",t=>{t.key=="Enter"&&P()});const O=()=>{S.push({name:"About-AboutDetail"})},L=t=>{a.value.email=t};X(()=>{i.setCountEmailDown(0)});let U=F(()=>a.value.email,t=>{i.setCountEmailDown(0)},{flush:"post"});return Y(()=>{U()}),j((t,o)=>{t.name=="About-AboutDetail"?sessionStorage.setItem("rpwd",JSON.stringify(a.value)):sessionStorage.setItem("rpwd","")}),y({showPhoneValidate:b}),(t,o)=>{const f=R("van-checkbox");return k(),h("div",Te,[d(le,{ref:"email",type:n.value,email:a.value.email,onChangeN:L},null,8,["type","email"]),d(x,{value:a.value.password,"onUpdate:value":o[0]||(o[0]=u=>a.value.password=u),label:l(s)("newPSWRest")},null,8,["value","label"]),I(r("div",Ce,[Ie,r("span",null,c(l(s)("pswRule")),1)],512),[[A,e.value]]),d(x,{value:a.value.rePassword,"onUpdate:value":o[1]||(o[1]=u=>a.value.rePassword=u),label:l(s)("newPSWconfirm")},null,8,["value","label"]),I(r("div",Ae,[r("span",null,c(l(s)("unmatchedInput")),1)],512),[[A,m.value]]),d(ue,{value:a.value.smsvcode,"onUpdate:value":o[2]||(o[2]=u=>a.value.smsvcode=u),sendFunc:g,email:a.value.email},null,8,["value","email"]),r("div",Be,[d(f,{modelValue:l(i).userForm.termAndPolicy,"onUpdate:modelValue":o[4]||(o[4]=u=>l(i).userForm.termAndPolicy=u)},{default:G(()=>[J(c(l(s)("readNagree"))+" ",1),r("span",{onClick:o[3]||(o[3]=Z(u=>O(),["stop"]))},c(l(s)("desPrivacy")),1)]),_:1},8,["modelValue"])]),r("div",Ee,[r("button",{onClick:P},c(l(s)("reset")),1)])])}}});const Fe=K($e,[["__scopeId","data-v-470fd154"],["__file","/var/lib/jenkins/workspace/web-印度-sikkim-ar058-webnew/src/components/Login/ResetEmailPassword.vue"]]),Re={class:"rpwd__C"},De={class:"rpwd__C-heading"},xe={class:"rpwd__C-heading__title"},Ne={class:"rpwd__C-heading__subTitle"},Ve={class:"login_container-tab"},Oe={class:"rpwd__C-form"},Le=M({__name:"index",setup(w){const{t:y}=ve.global,C=B(),n=N();n.getRegisterState();const s=W(),i=v("phone");n.isOpenForgetPasswordSMSState||(i.value="email");const _=v(!0);function S(){s.go(-1)}const b=m=>{i.value=m};return C.token&&(_.value=!1),j((m,e,a)=>{m.name!=="About-AboutDetail"&&N().clearRpwdData(),a()}),(m,e)=>{const a=R("NavBar"),g=R("svg-icon");return k(),h("div",Re,[d(a,{onClickLeft:S,leftArrow:!0,headLogo:!0,class:"main"},{right:G(()=>[d(de)]),_:1}),r("div",De,[r("h1",xe,c(l(y)("forgetPSW")),1),r("div",Ne,[r("div",null,c(m.$t("changepasswordphoneoremail")),1)])]),r("div",Ve,[l(n).isOpenForgetPasswordSMSState?(k(),h("div",{key:0,class:T(["tab",[i.value=="phone"?"active":""]]),onClick:e[0]||(e[0]=P=>b("phone"))},[d(g,{name:"phone"}),r("div",{class:T([i.value=="phone"?"phonefont30active":""])},c(m.$t("changepasswordphone")),3)],2)):E("v-if",!0),l(n).isOpenForgetPasswordEmailState?(k(),h("div",{key:1,class:T(["tab",[i.value=="email"?"active":""]]),onClick:e[1]||(e[1]=P=>b("email"))},[r("div",null,[d(g,{name:"email"}),J(),I(d(g,{name:"user"},null,512),[[A,l(n).isOpenExternalAccount]])]),r("div",{class:T([i.value=="email"?"emailfont30active":""])},c(m.$t("changepasswordemail")),3)],2)):E("v-if",!0)]),r("div",Oe,[l(n).isOpenForgetPasswordSMSState?(k(),h("div",{key:0,class:T(["tab-content",[i.value=="phone"?"activecontent":""]])},[d(Se)],2)):E("v-if",!0),l(n).isOpenForgetPasswordEmailState?(k(),h("div",{key:1,class:T(["tab-content",[i.value=="email"?"activecontent":""]])},[d(Fe)],2)):E("v-if",!0)])])}}});const rs=K(Le,[["__scopeId","data-v-928a098a"],["__file","/var/lib/jenkins/workspace/web-印度-sikkim-ar058-webnew/src/views/rpwd/index.vue"]]);export{rs as default};
